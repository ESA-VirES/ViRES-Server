{% extends "vires/base.html" %}
{% load i18n %}
{% block title %}
  <title>VirES for Swarm</title>
{% endblock %}


{% block content %}

{% if user.is_authenticated %}

  {% load staticfiles %}
  {% load account %}

  <link href="{% static 'css/form_styles.css' %}" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="{% static 'workspace/styles/main.css' %}" />

  <script type="text/javascript">
    var _paq = _paq || [];
    _paq.push(['setUserId', '{% user_display user %}']);
    _paq.push(['trackGoal', 3]);
    _paq.push(['setDocumentTitle', "Workspace"]);
  </script>

  <!-- Page Content -->
  <div id="content">
    <div id="main"></div>
    <div id="viewContent"></div>
    <div id="leftSideBar"></div>
    <div id="rightSideBar"></div>
    <div id="optionsBar"></div>
    <div id="topBar"></div>
    <div id="bottomBar"></div>
  </div>
  <div id="storyView" style="z-index: 0"></div>
  <div id="loadscreen" class="modal-backdrop">
      <div id="loading-spacer">
          <div class="project-title">VirES for Swarm</div>
      </div>
      <div class="loader">
          <div class="inner one"></div>
          <div class="inner two"></div>
          <div class="inner three"></div>
      </div>
  </div>
  <!-- HIDDEN DOWNLOAD DIV -->
  <div id="div-downloads">
    <iframe name="iframe-download-post" id="iframe-download-post"></iframe>
  </div>
  <div id="error-messages"></div>
  <div id="pngdataurl"></div>
  <div id="terrain_attribution">
    <p style="float: right"><a href="javascript:;" onclick="toggle(terrain_attribution)">×</a></p>
    <p>Terrain map data</p>
    <ul>
      <li>OpenStreetMap © <a href="http://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap contributors</a></li>
      <li>NaturalEarth <a href="http://www.naturalearthdata.com/about/terms-of-use/" target="_blank">public domain</a></li>
      <li>EU-DEM © Produced using Copernicus data and information<br>funded by the European Union</li>
      <li>SRTM © <a href="http://nasa.gov" target="_blank">NASA</a></li>
      <li>GTOPO30</li>
      <li>CleanTOPO2 public domain</li>
      <li>GlobCover © <a href="http://esa.int" target="_blank">ESA</a></li>
    </ul>
    <p>Terrain map design © <a href="http://eox.at" target="_blank">EOX IT Services GmbH</a></p>
  </div>
  <script>
    // Used to display/hide terrain attribution
    function toggle(e) { e.style.display = (e.style.display == 'block' ? 'none' : 'block'); }
  </script>
    
    <script type="text/javascript">
      this.NAVBARITEMS = [{
        "name": "{% user_display user %}",
        "icon": "fa-user",
        "eventToRaise": "modal:accountSettingsModal",
      },{
        "name": "Logout",
        "icon": "fa-sign-out",
        "url": "{% url 'account_logout' %}",
      }];
      var CONFIG_URL = "{% static 'workspace/scripts/config.json'%}";
      CESIUM_BASE_URL = "{% static 'workspace/bower_components/cesium/Build/Cesium/'%}";
      // you can register settings like this before require.js is loaded
      var require = {
          baseUrl : "{% static 'workspace/scripts/' %}"
      };
    </script>
    <!-- Modal forms -->
    <div class="modal fade" id="accountSettingsModal" tabindex="-1" role="dialog" aria-labelledby="accountSettingsLabel">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title" id="accountSettingsLabel">Settings ({% user_display user %})</h4>
          </div>
          <div class="modal-body">
            <a href="{% url 'account_change_password' %}">{% trans "Change password" %}</a><br/>
            <a href="{% url 'account_email' %}">{% trans "Change e-mail" %}</a><br/>
            <a href="{% url 'socialaccount_connections' %}">{% trans "Connect social accounts" %}</a><br/>
            <a href="{% url 'account_change_profile' %}">{% trans "Change profile information" %}</a>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>
    <script data-main="{% static 'workspace/scripts/init.js' %}" src="{% static 'workspace/bower_components/requirejs/require.js' %}"></script>





  {% else %}

    <script type="text/javascript">
      var _paq = _paq || [];
      _paq.push(['setDocumentTitle', "Landing Page"]);
    </script>

    <style type="text/css">
    /*! suit-flex-embed v1.4.0 | MIT License | github.com/suitcss */

      .FlexEmbed {
        display: block;
        overflow: hidden;
        position: relative;
      }

      .FlexEmbed:before {
        content: "";
        display: block;
        width: 100%;
      }

      .FlexEmbed--3by1:before {
        padding-bottom: 33.33333%;
      }

      .FlexEmbed--2by1:before {
        padding-bottom: 50%;
      }

      .FlexEmbed--16by9:before {
        padding-bottom: 56.25%;
      }

      .FlexEmbed--4by3:before {
        padding-bottom: 75%;
      }

      .CoverImage {
        background-position: 50%;
        background-repeat: no-repeat;
        background-size: cover;
        margin: 0 auto 0em;
        max-width: 2048px;
        max-height: 648px;
      }
      /* Loading image related styles inside template to use template tags*/


      .bg-1 {
        background: url('{% static 'images/Core_and_crust_from_Swarm.jpg' %}') no-repeat center center fixed; 
          -webkit-background-size: cover;
          -moz-background-size: cover;
          -o-background-size: cover;
          background-size: cover;
      }

      .bg-2 {
        background: url('{% static 'images/VirES_Swarm_banner2.jpg' %}') no-repeat center center fixed; 
          -webkit-background-size: cover;
          -moz-background-size: cover;
          -o-background-size: cover;
          background-size: cover;
      }

      .bg-3 {
        background: url('{% static 'images/Group_Picture_full.jpg' %}') no-repeat center center fixed; 
          -webkit-background-size: cover;
          -moz-background-size: cover;
          -o-background-size: cover;
          background-size: cover;
      }

    </style>

    <!-- Start landing page -->
    {% load i18n %}
    {% load account socialaccount %}

    <link href="{% static 'workspace/bower_components/bootstrap/dist/css/bootstrap.min.css'%}" rel="stylesheet">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css" rel="stylesheet">
    <link href="{% static 'css/landing_page.css' %}" rel="stylesheet">
    <link href="{% static 'css/form_styles.css' %}" rel="stylesheet">

        <!-- Wrap all page content here -->
    <div id="wrap">

     
    <header class="masthead">
        <!--<section id="header-image">
          <div class="image-attribution">&copy; ESA/AOES Medialab</div>
        </section>-->

        <div class="CoverImage FlexEmbed FlexEmbed--3by1"
           style="background-image:url('{% static 'images/VirES_Swarm_banner1.jpg' %}');"
        ></div>

        
      
    </header>
      
      
    <!-- Fixed navbar -->
    <div class="navbar navbar-custom navbar-inverse navbar-static-top" id="nav">
        <div class="container">
          <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
          </div>
          <div class="collapse navbar-collapse">
            <ul class="nav navbar-nav nav-justified">
              <li><a href="#Features">Features</a></li>
              <li><a href="#Data">Data</a></li>
              <li><a href="#Signup">Sign-up</a></li>
              <li><a href="#Login">Login</a></li>
            </ul>
          </div><!--/.nav-collapse -->
        </div><!--/.container -->
    </div><!--/.navbar -->
      
    <!-- Begin page content -->

    <div class="container">
      

      <div class="page-header text-center">
        <h1>Earth magnetic field as observed by satellite</h1>
        <h3>ESA Swarm data is available for anyone to use via the virtual research platform VirES</h3>
      </div>

        <p class="lead text-center"> 
          VirES for Swarm is a visual interface to
          the <a href="https://earth.esa.int/swarm" target="_blank">Swarm mission</a> magnetic products officially released by the European
          Space Agency. It includes tools to study Earth magnetic models, make comparisons
          with the satellite measurements, and consider solar activity. 
        </p> 
        
        <hr>

      </div>
    </div>


    <section class="bg-1">
      <div class="image-attribution">&copy; ESA/DTU Space/ATG medialab</div>
      <div class="col-sm-6 col-sm-offset-3 text-center"></div>
    </section>
      
    <div class="divider" id="Features"></div>

    <div class="row">
        <div class="col-sm-6 col-sm-offset-3 larger">
          <h1>Features</h1>

          <hr>
            <p>
              Here is a demonstration of the VirES for Swarm tools and main features. 
            </p>

          <div class="divider"></div>

          <div class="videowrapper">
            <iframe src="https://www.youtube.com/embed/SPRPEg7lp80" allowfullscreen></iframe>
          </div>

          <div class="divider"></div>

          <p>
              Swarm product data are visualized at the platform plotted over the map and
              shown in the analytics view. The time-slider and various controls offer the
              possibility to make selections and set criteria for data filtering and visualization
              which immediately take effect on the display. The subset of Swarm data
              selected by the user in this way can be downloaded in different encoding
              formats. In addition, the Swarm data can be visually and numerically compared
              to geomagnetic models, analysed with respect to Solar activity situation,
              and publication-ready plots and diagrammes be generated.
          </p> 
          
          <hr>
        
        </div><!--/col-->
    </div><!--/container-->

    <div class="divider" id="Data"></div>

    <section class="bg-2">
      <div class="image-attribution">&copy; ESA–P. Carril, 2013</div>
    </section>


    <div class="row">
        <div class="col-sm-6 col-sm-offset-3 larger">
          <h1>Data</h1>
          
          <hr>
         
          <p>
            The complete sets of magnetic vector and scalar data at 1 Hz rate at exact UTC seconds is provided for the A, B, and C Swarm satellites (<a target="_blank" href="http://swarm-wiki.spacecenter.dk/mediawiki-1.21.1/index.php/Level_1b_Product_Definitions">Swarm Level 1b Products MAGX_LR_1B</a>).
          </p>
          <p>The following models of the Earth's magnetic field and its time variation are pre-loaded:</p>
          <ul>
            <li style="list-style-type: circle;"> 
              The Swarm Initial Field Model for 2014 derived from the first year of data from the Swarm satellite trio (<a target="_blank" href="http://onlinelibrary.wiley.com/doi/10.1002/2014GL062659/abstract">SIFM</a>)
            </li>
            <li style="list-style-type: circle;"> 
              The 12th Generation International Geomagnetic Reference Field (<a target="_blank" href="http://earth-planets-space.springeropen.com/articles/10.1186/s40623-015-0228-9">IGRF 12</a>) released in 2015 by the International Association of Geomagnetism and Aeronomy
            </li>
            <li style="list-style-type: circle;"> 
              The CHAOS-5 high resolution geomagnetic field model, derived primarily from Swarm, CHAMP, and Ørsted satellite magnetic data along with ground observatory data (<a target="_blank" href="http://earth-planets-space.springeropen.com/articles/10.1186/s40623-015-0274-3">CHAOS-5</a>)
            </li>
          </ul>
          <p>Users can also work with Custom Models and upload Spherical Harmonic Expansion coefficients (<a target="_blank" href="http://www.spacecenter.dk/files/magnetic-models/CHAOS-5/SHC-Format-Decsription.pdf">SHC file format</a>)</p>
          <p>The global context of space weather is provided in form of:</p>
          <ul>
            <li style="list-style-type: circle;"> 
              The Disturbance storm time index (<a target="_blank" href="https://en.wikipedia.org/wiki/Disturbance_storm_time_index">Dst Index</a>)
            </li>
            <li style="list-style-type: circle;">
              The Disturbances in the horizontal component of earth's magnetic field (<a target="_blank" href="https://en.wikipedia.org/wiki/K-index">planetary Kp Index</a>)
            </li>
          </ul>

        </div><!--/col-->
    </div><!--/container-->

    <div class="divider"></div>

    <div class="divider" id="Signup"></div>

    <section class="bg-3">
      <div class="image-attribution">&copy; DTU Space-P-E. Holmdahl-Olsen, 2014</div>
    </section>


    <div class="row">
        <div class="col-sm-6 col-sm-offset-3 larger">
          <h1>Sign-up</h1>
          
          <hr>
         
          <p>
            Swarm for VirES service and data are 100% free. To access Swarm data you
            need to sign-up (register) as a user by providing user profile information
            such as user name, email address, title, country, institution, and an executive
            description of the the project in which your Swarm data is being used. 
          </p>
          
          <hr>

          <div style="text-align: center">
            <p style="text-align: center;">Sign-up using your preferred social provider (no need to remember new passwords!):</p>
            <ul class="socialaccount_providers">
              {% include "socialaccount/snippets/provider_list.html" with process="signup" %}
            </ul>
            <p style="text-align: center;">or sign-up directly:</p>
            <div style="margin-top: 2em;">
              <a class="linkbutton" href="{% url 'account_signup' %}">Sign-up</a>
            </div>
          </div>
          
          <div class="divider"></div>
          
        </div><!--/col-->
    </div><!--/container-->
    <div class="row form-group">
        <div class="col-xs-10">
          
        </div>
    </div>
      
  
    <div class="divider" id="Login"></div>

    <div class="row">
      
      <hr>
      
      <div class="col-sm-6 col-sm-offset-3 larger">
          
        <div class="row form-group">
          <h1>Login</h1>
        </div>
      
      </div><!--/row-->

     <div class="col-sm-4 col-sm-offset-4 larger">
      <p style="text-align: center;">Login using your preferred social provider:</p>
      <ul class="socialaccount_providers">
        {% include "socialaccount/snippets/provider_list.html" with process="login" %}
      </ul>
      <p style="text-align: center;">or directly with your account credentials here:</p>
      <form class="form-horizontal inputwide" method="POST" action="{% url 'account_login' %}">
          {% csrf_token %}
          <fieldset>
           {% if form.errors %}
             <p class="help-inline error">
               Incorrect login or password.<br>
               Please try again.<br>
               Note that both fields are case sensitive.
             </p>
           {% endif %}
           {% for field in login_form %}
             {% if field.errors %}
               <div class="control-group error">
                 <label class="control-label" for="{{ field.id_for_label }}">{{ field.label }}</label>
                 {{ field }}
                 <span class="help-inline error">
                   {% for error in  field.errors %}{{ error }}{% endfor %}
                 </span>
               </div>
             {% else %}
               <div class="control-group">
                 <label class="control-label" for="{{ field.id_for_label }}">{{ field.label }}</label>
                 {{ field }}
                 {% if field.help_text %}
                     <p class="help-inline"><small>{{ field.help_text }}</small></p>
                 {% endif %}
               </div>
             {% endif %}
           {% endfor %}
           {% if redirect_field_value %}
               <input type="hidden" name="{{ redirect_field_name }}" value="{{ redirect_field_value }}" />
           {% endif %}
           <div class="form-actions" style="text-align: center; margin:15px 0 20px 0;">
               <button style="border: none;" type="submit" class="linkbutton">{% trans "Login" %}</button>
           </div>
          </fieldset>
        </form>
        <div class="divider"></div>
     </div>
      
    <div class="container">
        <div class="col-sm-8 col-sm-offset-2 text-center">

          
        </div><!--/col-->
    </div><!--/container-->
      
    </div><!--/wrap-->

    <div id="footer">
      <div class="container">
        <div class="row">
          <div class="col-md-6">
            <div class="row">

                <a href="http://eox.at" target="_blank" style="text-decoration: none;">
                  <img style="height:30px; display:inline;" src="{% static 'images/EOX_Logo_inverted.png' %}">
                </a>


                <p class="text-muted" style="display:inline;">service for</p>


                <a href="http://esa.int" target="_blank" style="text-decoration: none;">
                  <img style="height:50px;  display:inline; margin-left:4px;" src="{% static 'images/esa_logo_white.png' %}">
                </a>

            </div>
          </div>

          <div class="col-md-6 text-muted" style="text-align: center; margin-top:15px;">
            <a style="display:inline; margin-right:5px;" href="{% static 'other/T&C_for_ESA_Dataset-v1.pdf' %}" target="_blank_">ESA Data Terms</a> | 
            <a style="display:inline; margin-left:5px;" href="/accounts/servicetc" target="_blank_">VirES Service Terms</a> |
            <a href="https://earth.esa.int/swarm" target="_blank">Swarm mission</a>
          </div>
        </div>
      </div>
    </div>

    <ul class="nav pull-right scroll-top">
      <li><a href="#" title="Scroll to top"><i class="glyphicon glyphicon-chevron-up"></i></a></li>
    </ul>


    <!-- script references -->
    {% load staticfiles %}

    <script src="{% static 'workspace/bower_components/jquery/jquery.min.js'%}"></script>
    <script src="{% static 'workspace/bower_components/bootstrap/dist/js/bootstrap.min.js'%}"></script>
    <script src="{% static 'js/landing_page.js' %}"></script>

    <!-- End landing page -->

  {% endif %}
  
{% endblock %}
